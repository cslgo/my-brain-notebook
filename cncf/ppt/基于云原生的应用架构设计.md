基于云原生的应用架构设计
===
讲师：胡建华
---

以应用为中心

充分发挥云的优势

帮助企业快速发展

包括：容器 服务网格 微服务 声明式API 不可变的基础设施

## 课程背景

解决：

1. 对云原生概念理解浅显，导致应用架构设计时无从着手
2. 设计出的的架构与“云原生”的初衷相悖

## 学习目标

1. 了解应用架构设计发展阶段，理解各阶段架构设计方法所解决的问题和应用优缺点。
2. 了解云原生应用背后技术思想，并掌握云原生应用构建的基本思路与方法。
3. 掌握开展云原生应用架构落地的基本方向和技术基础。

## 课程结构

* 云原生应用架构设计
  * 背景
    * 应用架构的发展历程
    * 云架构趋势
  * 云原生基础
    * 为什么引入云原生
    * 云原生关键技术解读
  * 云原生应用构建思路
    * 云原生应用定义
    * 云原生应用的构建思路
    * 云化架构方案
    * 最佳实践

## Part 1 应用架构的背景

包括：

1. 应用架构的发展历程
2. 架构云化的趋势

### 应用架构的发展历程

应用架构的演进：

单体 -> SOA -> 微服务 -> 云化架构

架构演变：

单体架构：前后端分离

SOA 架构：业务系统分拆、企业服务总线、服务声明范式

微服务架构：功能模块解耦、弹性伸缩

推动因素：

虚拟化：更高的资源利用率 集中化管理 动态调整资源配置

容器化：底层硬件解耦 运行环境封装 服务编排

云化基础设施：资源池化 按需计费 IaaS、PaaS基础支撑

推动因素促进架构演化

### 云架构趋势

#### Page 1

云化阶段：

阶段 1：横向扩展 资源池化 管理统一 提升效率

阶段 2：网络虚化 存储虚化 易于管理 自动部署

阶段 3：敏捷化 智能化 微服务化 数据共享

云化历程及趋势：

2006 IaaS Amazon S3 EC2
2008      Google GAE（Google App Engine）
2009 PaaS HeroKu 推出第一款 PaaS
2010      Microsoft Azure 云平台推出
2011 开源 IaaS OpenStack
2011 开源 PaaS Pivotal 发布 Cloud Foundry
2013      Google 推出 GCE（Google Cloud Engine）
2014 FaaS Amazon 推出 Lambda
...

#### Page 2

未来应用架构的四点核心需求：

* 高可用
* 高性能
* 弹性伸缩
* 成本优化


四点核心需求四象限表述：

11 高可用：数据不能丢失，功能可用性 99.999%，自然灾害
12 高性能： 网络波动影响，缓存击穿，实时监控报警
21 弹性伸缩：业务量的快速上升，削峰平谷，快速部署
22 成本优化：按需计费，资源自动参数调优，PaaS基础服务

#### Page 3

云化解决方案提供的解决问题可能性：

1. 资源弹性伸缩

解决潮汐应用的访问高峰和访问低谷带来的资源浪费问题

解决了业务量快速上升期带来的资源扩展问题

2. 多资源池保证可用性和扩展性

最初阶段，用户可将应用部署于符合需求的可用区域，以降低服务延迟， 随着服务流量的增加，应用升级为全局应用服务，此时可采用跨多个资源池部署方式，即可提供了服务的可用性，也可保证了扩展性。

3. 安全性

云平台提供了多种安全组件和服务，保证应用上云之后的安全性，云防火墙，防DDoS攻击，漏洞扫描等工具产品，有效帮助客户实现更高级别的数据保护和主机安全。

4. 成本&运维

集中化资源管理，节约成本，云平台提供众多的运维工具，自动化运维，从监控到备份提供完善的解决方案。


## 云原生

### 云原生基础

#### 概念
云原生（Cloud Native）这个概念，是由Pivotal的Matt Stine于2013年首次提出。

2015年Google主导成立云原生计算基金会（CNCF），起初CNCF对云原生（Cloud Native）的定义

到了2018年，CNCF基金会中的会员以及容纳的项目越来越容，该定义已限制了云原生生态的发展，CNCF为云原生进行重新定位。

云原生技术有利于各组织在公有云、私有云和混合云等新型动态环境中，构建和运行可弹性扩展的应用。云原生的代表技术包括容器、服务网格（Service Mesh）、微服务、不可变基础设施和声明式API。这些技术能够构建容错性好、易于管理和便于观察的松耦合系统。结合可靠的自动化手段，云原生技术使工程师能够轻松地对系统作出频繁和可预测的重大变更。

CLOUD NATIVECOMPUTING FOUNDATION

简单理解：云原生是指从云的原生应用角度出发，一整套设计、开发、部署、运行、维护的流程、技术栈以及背后文化理念的统称。

#### 目标

### 云原生关键技术

## 云原生应用构建