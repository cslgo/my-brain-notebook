背景

1. 数据库水平切分，分库分表的出现
2. 业务模块化切分，微服务化

分布式系统理论

ACID

分布式事务隔离级别

两阶段提交协议

xa 
    1. 高并发场景性能很差，几乎无法使用 
    2. 在商业数据库里xa实现比较理想，但在mysql数据库中支持的不太理想，mysql的XA实现，没有记录prepare阶段日志，主备切换回导致主库与备库数据不一致等。许多nosql也没有支持XA，这让XA的应用场景变得非常狭隘。

at AT 模式是一种无侵入的分布式事务解决方案，在 AT 模式下，用户只需关注自己的“业务 SQL”，用户的 “业务 SQL” 作为一阶段，Seata 框架会自动生成事务的二阶段提交和回滚操作。

    after image 防止脏写，AT 模式是一种对业务无任何侵入的分布式事务解决方案。

消息事务+最终一致性 ： 基于消息系统的事务一致性来保证分布式事务一致性，高性能，时效性可能差，最终一致性，若有执行一直不成功的分支事务，就会导致事务破坏。

本地事务失败要支持回调，需要写相应回调函数

tcc TCC就是通过代码人为实现了两阶段提交，将整个业务逻辑分为三块：Try、Confirm和Cancel三个操作，不同的业务场景所写的代码都不一样，复杂度也不一样，因此，这种模式并不能很好地被复用。
    用户接入 TCC ，最重要的是考虑如何将自己的业务模型拆成两阶段来实现。

saga Saga 是一种补偿协议，在 Saga 模式下，分布式事务内有多个参与者，每一个参与者都是一个冲正补偿服务，需要用户根据业务场景实现其正向操作和逆向回滚操作
